<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>(ARCOS) WepSIM Tester</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="external/jquery.min.js"></script>
    <script src="external/jquery-ui.min.js"></script>
    <script>
        $(document).bind("mobileinit", function() {
            $.mobile.defaultPageTransition = "none";
            $.mobile.defaultDialogTransition = "none";
        });
    </script>
    <script src="external/jquery.mobile-1.4.5.min.js"></script>

    <link rel="stylesheet" href="external/jquery.mobile-1.4.5.min.css">
    <style>
    .ui-panel-inner {
        position: absolute;
        top: 1px;
        left: 0;
        right: 0;
        bottom: 0px;
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
    }

    textarea.ui-input-text {
        height: inherit !important
    }

    .ui-icon-reset:after {
	background-image: url("images/reset.svg");
        background-repeat: no-repeat;
        background-size: 15px 15px;
    }
    </style>

    <link  href="external/external.min.css" rel="stylesheet">
    <script src="external/external.min.js"></script>

    <script src="min.sim_all.js"></script>
    <script src="min.sim_hw.js"></script>
    <script src="min.wepsim.js"></script>
    <script src="min.sim_tester.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-80849772-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

</head>


<body>

<div data-role="page" id="main5">

        <div data-role="header" data-position="fixed" data-disable-page-zoom="false" data-tap-toggle="false" data-theme="a">
		<div id="button_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-left">
                    <a href="#about2" data-rel="popup" data-position-to="window"><img src="images/arcos.svg" height="40"></a>
		</div>
	        <span class="ui-title"><b>WepSIM Checker</b> <span class="badge">2.0.2</span> </span>
		<div id="version_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
                    <a href="#actions_panel"
                       class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b ui-icon-gear ui-btn-icon-left">Menu</a>
		</div>
        </div><!-- /header -->

        <div data-role="footer" data-position="fixed" data-disable-page-zoom="false" data-tap-toggle="false" data-theme="a">
		<div class="progress">
		  <div id="pbar1"
                       class="progress-bar progress-bar-success active" role="progressbar"
                       aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
		</div>
        </div><!-- /footer -->

        <div role="main" class="ui-content">

		<div id="lsload8"
                     data-role="popup" data-overlay-theme="a" data-theme="a" data-dismissible="false">
		    <div data-role="header" data-theme="a">
		    <h1>Load files...</h1>
		    </div>
		    <div role="main" class="ui-content">

                        <h3>Please select the files to be loaded:</h3>
                        <p><input type="file" id="filesToLoada" multiple
                                  data-max-height="100" class="dropify" /></p>

			<h3>Please select the file to be used as assembly test:</h3>
			<p><input type="file" id="fileToLoad3a" 
                                  data-max-height="100" class="dropify" /></p>

			<h3>Please select the file to be used as checklist:</h3>
			<p><input type="file" id="fileToLoad5a" 
                                  data-max-height="100" class="dropify" /></p>

			<center>
			<a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" 
                                    data-rel="back">Cancel</a>
                        <button class="ui-btn ui-btn-b ui-btn-inline"
                                onclick="wt_load_files('filesToLoada', 'fileToLoad3a', 'fileToLoad5a');
                                         $('#lsload8').popup('close');">Load from File</button>
                        </center>
		    </div>
		</div>

                <br>

<!--
                <table data-role="table" id="tmfiles" data-mode="reflow" 
                       class="ui-responsive table-stroke table-bordered table-condensed table-hover">
                <thead>
                 <tr>
                 <th width=20%>File name</th>
                 <th width=10%>Load <br>firmware</th>
                 <th width=10%>&#181;compile firmware</th>
                 <th width=10%>Compilation &nbsp;
                        <a href="#" 
                           onclick="$('#show_asm_test').modal('show');">(Test)</a>
			</th>
                 <th width=10%>Execution &nbsp;
                        <a href="#" 
                           onclick="$('#show_checklist').modal('show');">(Checklist)</a>
			</th>
                 <th width=40%>Comments</th>
                 </tr>
                </thead>
                <tbody id="tbmfile">
                 <tr>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 </tr>
                </tbody>
                </table>
-->

                <table data-role="table" id="tmfiles" data-mode="reflow" 
                       class="ui-responsive table-stroke table-bordered table-condensed table-hover">
                <thead>
			<tr>
			<th width=20%>File name</th>
			<th width=10%>Load <br>firmware</th>
			<th width=10%>&#181;compile firmware</th>
			<th width=10%>Compilation &nbsp;
				<a href="#"
				   onclick="$('#show_asm_test').modal('show');">(Test)</a>
				</th>
			<th width=10%>Execution &nbsp;
				<a href="#"
				   onclick="$('#show_checklist').modal('show');">(Checklist)</a>
				</th>
			<th width=40%>Comments</th>
			</tr>
		</thead>
		<tbody data-bind="foreach: mfiles">
			<tr>
				<td data-bind="text: name"></td>
				<td>
				    <a href='#'  
                                       data-bind="attr: { data_index: $index() }"
				       onclick="var index = parseInt(this.getAttribute('data_index')) ;
                                                show_firm_origin(index);"
				       data-position-to='windows' data-transition='none' 
				       data-rel='popup'><div data-bind="text: RL">NONE</div></a> 
				</td>
				<td>
				    <a href='#'  
                                       data-bind="attr: { data_index: $index() }"
				       onclick="var index = parseInt(this.getAttribute('data_index')) ;
                                                show_firm_result(index);"
				       data-position-to='windows' data-transition='none' 
				       data-rel='popup'><div data-bind="text: RUC">NONE</div></a> 
				</td>
				<td>
				    <a href='#'  
                                       data-bind="attr: { data_index: $index() }"
				       onclick="var index = parseInt(this.getAttribute('data_index')) ;
                                                show_asm_result(index);"
				       data-position-to='windows' data-transition='none' 
				       data-rel='popup'><div data-bind="text: RE">NONE</div></a> 
				</td>
				<td>
				    <a href='#'  
                                       data-bind="attr: { data_index: $index() }"
				       onclick="var index = parseInt(this.getAttribute('data_index')) ;
                                                show_checklist_result(index);"
				       data-position-to='windows' data-transition='none' 
				       data-rel='popup'><div data-bind="text: RX">NONE</div></a> 
				</td>
				<td>
				    <a href='#'  
                                       data-bind="attr: { data_index: $index() }"
				       onclick="var index = parseInt(this.getAttribute('data_index')) ;
                                                show_comments_result(index);"
				       data-position-to='windows' data-transition='none' 
				       data-rel='popup'><div data-bind="text: RC">NONE</div></a> 
				</td>
			</tr>
		</tbody>
		</table>

        </div><!-- /content -->

</div><!-- /page -->


<div data-role="popup" id="about2"
     data-theme="a" data-dismissible="false" data-animate="false" data-overlay-theme="b">

   <div data-role="header" data-theme="a">
   <h1><b>Web Elemental Processor SIMulator Tester</b> <span class="badge btn-success">2.0.2</span> </h1>
   </div>
   <div role="main" class="ui-content">
        <table id="tabout2" 
               data-role="table" data-mode="reflow" 
               class="ui-responsive" style="max-width:80vw;">
        <thead align=center>
        <tr>
        <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td rowspan=3 valign="middle">
            <img src="images/arcos.svg">
          </td>
          <td>
            Copyright &copy; 2017 Alejandro Calder&oacute;n Mateos, F&eacute;lix Garc&iacute;a Carballeira, Javier Prieto Cepeda, and Sa&uacute;l Alonso Monsalve
          </td>
        </tr>
        <tr>
         <td>
	    <b>WebSIM-Checker</b> is free software: you can redistribute it and/or modify
	    it under the terms of the GNU Lesser General Public License as published by
	    the Free Software Foundation, either version 3 of the License, or
	    (at your option) any later version.
            See <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
         </td>
        </tr>
        <tr>
         <td>
            More information: <a href="http://www.arcos.inf.uc3m.es/~ec-2ed/">http://www.arcos.inf.uc3m.es/~ec-2ed/</a><br>
         </td>
        </tr>
        </tbody>
        </table>

        <br>
        <center><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Ok</a></center>
   </div>

</div><!-- /popup -->


<div data-role="panel" id="actions_panel"
     data-display="overlay" data-animate="false" data-position="right" data-theme="a"
     style="width:19em; min-width:18em;">

      <ol id="listview_2" data-role="listview" data-inset="true" data-theme="a" data-divider-theme="b">
            <li><h1>Microcodes</h1>
                <input type="file" id="filesToLoadb" multiple/></li>

	    <li><h1>Assembly file</h1>
		<input type="file" id="fileToLoad3b" /></li>

	    <li><h1>Checklist file</h1>
		<input type="file" id="fileToLoad5b" /></li>

	    <li><a href="#" style="background-color: lightgray"
		   onclick="wt_load_files('filesToLoadb', 'fileToLoad3b', 'fileToLoad5b');"
		   data-rel="popup" data-position-to="origin" data-transition="none"
                   data-inline="true"><h2>Load files</h2><p>Load former files...</p></a></li>

	    <li><a href="#" style="background-color: lightgray"
                   onclick="var checklist_text = model.checklist();
			    var asm_text       = model.asm_test();
			    execute_firmwares_and_asm(checklist_text, asm_text);"
		   data-inline="true"><h2>&#181;check</h2><p>Check microcodes...</p></a></li>

	    <li><a href="#" style="background-color: lightgray"
                   onclick="SelectText('tmfiles');
                            document.execCommand('copy');"
		   data-inline="true"><h2>Copy results</h2><p>Copy to clipboard...</p></a></li>
      </ol>
</div>

<div id="popup1" class="modal">
     <div class="modal-dialog" style="width:95vw; height:80vh;">
        <div class="modal-content">
           <div class="modal-header">
                <button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-btn-b ui-icon-delete ui-btn-icon-notext ui-corner-all"
                        data-dismiss="modal" aria-hidden="true">x</button>
                <center>
                <h4><span id="popup1title">&nbsp;</span></h4>
                </center>
           </div>
           <div class="modal-body">
	        <div id='popup1div' 
	    	     style="overflow:auto; max-height:65vh; max-width:85vw;">Content is not loaded.</div>
           </div>
           <div class="modal-footer">
                <button type="button"
                        onclick="$('#popup1').modal('hide');"
                        class="btn btn-primary col-xs-3 pull-right">&nbsp;&nbsp;OK&nbsp;&nbsp;</button>
           </div>
        </div>
     </div>
</div> <!-- /.modal -->

<div id="show_asm_test" class="modal">
     <div class="modal-dialog" style="width:95vw; height:65vh;">
        <div class="modal-content">
           <div class="modal-header">
                <button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-btn-b ui-icon-delete ui-btn-icon-notext ui-corner-all"
                        data-dismiss="modal" aria-hidden="true">x</button>
                <center>
                <h4>Assembly Test</h4>
                </center>
           </div>
           <div class="modal-body">
		<pre id="asm_test" 
		     data-bind="text: asm_test" 
		     style="overflow:scroll; max-height:65vh;"></pre>
           </div>
           <div class="modal-footer">
                <button type="button"
                        onclick="$('#show_asm_test').modal('hide');"
                        class="btn btn-primary col-xs-3 pull-right">&nbsp;&nbsp;OK&nbsp;&nbsp;</button>
           </div>
        </div>
     </div>
</div> <!-- /.modal -->

<div id="show_checklist" class="modal">
     <div class="modal-dialog" style="width:95vw; height:65vh;">
        <div class="modal-content">
           <div class="modal-header">
                <button type="button" data-role="button"
                        class="close ui-btn-right ui-btn ui-btn-b ui-icon-delete ui-btn-icon-notext ui-corner-all"
                        data-dismiss="modal" aria-hidden="true">x</button>
                <center>
                <h4>Checklist</h4>
                </center>
           </div>
           <div class="modal-body">
		<pre id="checklist" 
		     data-bind="text: checklist"
		     style="overflow:scroll; max-height:65vh;"></pre>
           </div>
           <div class="modal-footer">
                <button type="button"
                        onclick="$('#show_checklist').modal('hide');"
                        class="btn btn-primary col-xs-3 pull-right">&nbsp;&nbsp;OK&nbsp;&nbsp;</button>
           </div>
        </div>
     </div>
</div> <!-- /.modal -->



<div class="material-button-anim" 
     style="margin:0 0 0 0; padding:0 0 0 0; top:55vh; right:10px; z-index:5; position:absolute;">
	  <ul class="list-inline" id="options">
	    <li class="option">
	      <button class="material-button option1" type="button"
		      onclick="$('#lsload8').popup('open');">load</button>
	    </li>
	    <li class="option">
	      <button class="material-button option2" type="button"
                      onclick="model.mfiles.removeAll();
                               wt_load_files('filesToLoada', 'fileToLoad3a', 'fileToLoad5a');">re-load</button>
	    </li>
	    <li class="option">
	      <button class="material-button option3" type="button"
                      onclick="var checklist_text = model.checklist();
			       var asm_text       = model.asm_test();
			       execute_firmwares_and_asm(checklist_text,asm_text);">&#181;check</button>
	    </li>
	  </ul>
	  <button class="material-button material-button-toggle" type="button">Men&uacute;</button>
</div>


<script>

    restore_cfg();

    $(document).ready(function()
    {
            jQuery.fx.off = true;

            $("#about2").enhanceWithin().popup();
            $("#actions_panel").panel().enhanceWithin();
            $("#listview_2").listview();

            $('.material-button-toggle').on("click", function () {
                $(this).toggleClass('open');
                $('.option').toggleClass('scale-on');
            });

            $('.dropify').dropify();

	    $("#pbar1").attr('aria-valuenow', 0);
	    $("#pbar1").attr('aria-valuemin', 0);
	    $("#pbar1").attr('aria-valuemax', 0);

            model = new wt_dataModel();
            ko.applyBindings(model);
    }) ;

</script>

</body>

</html>

