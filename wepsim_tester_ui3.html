<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>(ARCOS) WepSIM Tester</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="external/jquery.min.js"></script>
    <script src="external/jquery-ui.min.js"></script>
    <script>
        $(document).bind("mobileinit", function() {
            $.mobile.defaultPageTransition = "none";
            $.mobile.defaultDialogTransition = "none";
        });
    </script>
    <script src="external/jquery.mobile-1.4.5.min.js"></script>

    <link rel="stylesheet" href="external/jquery.mobile-1.4.5.min.css">
    <style>
    .ui-panel-inner {
        position: absolute;
        top: 1px;
        left: 0;
        right: 0;
        bottom: 0px;
        overflow: scroll;
        -webkit-overflow-scrolling: touch;
    }

    textarea.ui-input-text {
        height: inherit !important
    }

    .ui-icon-reset:after {
	background-image: url("images/reset.svg");
        background-repeat: no-repeat;
        background-size: 15px 15px;
    }
    </style>

    <link  href="external/external.min.css" rel="stylesheet">
    <script src="external/external.min.js"></script>

    <script src="min.sim_all.js"></script>
    <script src="min.sim_hw.js"></script>
    <script src="min.wepsim.js"></script>
    <script src="min.sim_tester.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-80849772-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->

</head>


<body>

<div data-role="page" id="main5">

        <div data-role="header" data-position="fixed" data-disable-page-zoom="false" data-tap-toggle="false" data-theme="a">
		<div id="button_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-left">
                    <a href="#about2" data-rel="popup" data-position-to="window"><img src="images/arcos.svg" height="40"></a>
		</div>
	        <span class="ui-title"><b>WepSIM Checker</b> <span class="badge">2.0.1</span> </span>
		<div id="version_bar" data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
                    <a href="#actions_panel"
                       class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b ui-icon-gear ui-btn-icon-left">Menu</a>
		</div>
        </div><!-- /header -->

        <div data-role="footer" data-position="fixed" data-disable-page-zoom="false" data-tap-toggle="false" data-theme="a">
		<div class="progress">
		  <div id="pbar1"
                       class="progress-bar progress-bar-success active" role="progressbar"
                       aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
		</div>
        </div><!-- /footer -->

        <div role="main" class="ui-content">

                <div data-role='popup' id='IF'>
                    <a href='#' data-rel='back'
                       class='ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right'>Close</a>
                    <div id='LF' style="overflow:auto; max-height:80vh; max-width:80vw;">Firmware is not loaded.</div>
                </div>

                <div data-role='popup' id='IUC'>
                    <a href='#' data-rel='back'
                       class='ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right'>Close</a>
                    <div id='BF' style="overflow:auto; max-height:80vh; max-width:80vw;">Firmware is not micro-compiled.</div>
                </div>

                <div data-role='popup' id='IE'>
                    <a href='#' data-rel='back'
                       class='ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right'>Close</a>
                    <div id='EF' style="overflow:auto; max-height:80vh; max-width:80vw;">Firmware is not tested.</div>
                </div>

                <div data-role='popup' id='IX'>
                    <a href='#' data-rel='back'
                       class='ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right'>Close</a>
                    <div id='XF' style="overflow:auto; max-height:80vh; max-width:80vw;">Firmware is not checked.</div>
                </div>

                <div data-role='popup' id='IC'>
                    <a href='#' data-rel='back'
                       class='ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right'>Close</a>
                    <div id='CF' style="overflow:auto; max-height:80vh; max-width:80vw;">No comments.</div>
                </div>

                <table data-role="table" id="tmfiles" data-mode="reflow" 
                       class="ui-responsive table-stroke table-bordered table-condensed table-hover">
                <thead>
                 <tr>
                 <th width=20%>File name</th>
                 <th width=10%>Firmware</th>
                 <th width=10%>&#181;compilation</th>
                 <th width=10%>Compilation &nbsp;
			<div data-role="popup" id="show_asm_test">
                        <a href="#" data-rel="back"
                           class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
			<pre id="asm_test" style="overflow:scroll; max-height:80vh;"></pre>
			</div>
                        <a href="#show_asm_test" data-rel="popup" data-transition="none">(Test)</a>
			</th>
                 <th width=10%>Execution &nbsp;
			<div data-role="popup" id="show_checklist">
                        <a href="#" data-rel="back"
                           class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
			<pre id="checklist" style="overflow:scroll; max-height:80vh;"></pre>
			</div>
                        <a href="#show_checklist" data-rel="popup" data-transition="none">(Checklist)</a>
			</th>
                 <th width=40%>Comments</th>
                 </tr>
                </thead>
                <tbody id="tbmfile">
                 <tr>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 <td>...</td>
                 </tr>
                </tbody>
                </table>

        </div><!-- /content -->

</div><!-- /page -->


<div data-role="popup" id="about2"
     data-theme="a" data-dismissible="false" data-animate="false" data-overlay-theme="b">

   <div data-role="header" data-theme="a">
   <h1><b>Web Elemental Processor SIMulator Tester</b> <span class="badge btn-success">2.0.1</span> </h1>
   </div>
   <div role="main" class="ui-content">
        <table id="tabout2" 
               data-role="table" data-mode="reflow" 
               class="ui-responsive" style="max-width:80vw;">
        <thead align=center>
        <tr>
        <th>&nbsp;</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td rowspan=3 valign="middle">
            <img src="images/arcos.svg">
          </td>
          <td>
            Copyright &copy; 2017 Alejandro Calder&oacute;n Mateos, F&eacute;lix Garc&iacute;a Carballeira, Javier Prieto Cepeda, and Sa&uacute;l Alonso Monsalve
          </td>
        </tr>
        <tr>
         <td>
	    <b>WebSIM-Checker</b> is free software: you can redistribute it and/or modify
	    it under the terms of the GNU Lesser General Public License as published by
	    the Free Software Foundation, either version 3 of the License, or
	    (at your option) any later version.
            See <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
         </td>
        </tr>
        <tr>
         <td>
            More information: <a href="http://www.arcos.inf.uc3m.es/~ec-2ed/">http://www.arcos.inf.uc3m.es/~ec-2ed/</a><br>
         </td>
        </tr>
        </tbody>
        </table>

        <br>
        <center><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b" data-rel="back">Ok</a></center>
   </div>

</div><!-- /popup -->


<div data-role="panel" id="actions_panel"
     data-display="overlay" data-animate="false" data-position="right" data-theme="a"
     style="width:19em; min-width:18em;">

      <ol id="listview_2" data-role="listview" data-inset="true" data-theme="a" data-divider-theme="b">
            <li><h1>Microcodes</h1>
                <input type="file" id="filesToLoad" multiple/></li>

	    <li><h1>Assembly file</h1>
		<input type="file" id="fileToLoad3" /></li>

	    <li><h1>Checklist file</h1>
		<input type="file" id="fileToLoad5" /></li>

	    <li><a href="#" style="background-color: lightgray"
		   onclick="// microcode
			    mfiles = document.getElementById('filesToLoad').files;
			    load_firmware_from_files(mfiles, '#tbmfile');

			    // assembly 
			    var fileToLoad = document.getElementById('fileToLoad3').files[0];
			    var fileReader = new FileReader();
			    fileReader.onload = function (fileLoadedEvent) {
					           $('#asm_test').text(fileLoadedEvent.target.result);
					        };
			    fileReader.readAsText(fileToLoad, 'UTF-8');

			    // checklist
			    var fileToLoad = document.getElementById('fileToLoad5').files[0];
			    var fileReader = new FileReader();
			    fileReader.onload = function (fileLoadedEvent) {
					           $('#checklist').text(fileLoadedEvent.target.result);
					        };
			    fileReader.readAsText(fileToLoad, 'UTF-8');"
		   data-rel="popup" data-position-to="origin" data-transition="none"
                   data-inline="true"><h2>Load files</h2><p>Load former files...</p></a></li>

	    <li><a href="#" style="background-color: lightgray"
                   onclick="var checklist_text = $('#checklist').text();
			    var asm_text       = $('#asm_test').text();
			    execute_firmwares_and_asm(checklist_text,asm_text);"
		   data-inline="true"><h2>&#181;check</h2><p>Check microcodes...</p></a></li>
      </ol>
</div>


<script>
    restore_cfg();

    $(document).ready(function()
    {
            jQuery.fx.off = true;

            $("#about2").enhanceWithin().popup();
            $("#actions_panel").panel().enhanceWithin();
            $("#listview_2").listview();
    }) ;
</script>


</body>

</html>

